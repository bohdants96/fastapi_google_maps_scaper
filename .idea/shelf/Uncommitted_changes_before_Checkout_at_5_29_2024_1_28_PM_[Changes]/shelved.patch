Index: main.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import sentry_sdk\nfrom fastapi import FastAPI\nfrom fastapi.routing import APIRoute\nfrom starlette.middleware.cors import CORSMiddleware\n\nfrom app.api.main import api_router\nfrom app.core.config import settings\n\n\ndef custom_generate_unique_id(route: APIRoute) -> str:\n    return f\"{route.tags[0]}-{route.name}\"\n\n\nif settings.SENTRY_DSN and settings.ENVIRONMENT != \"local\":\n    sentry_sdk.init(dsn=str(settings.SENTRY_DSN), enable_tracing=True)\n\napp = FastAPI(\n    title=settings.PROJECT_NAME,\n    openapi_url=f\"{settings.API_V1_STR}/openapi.json\",\n    generate_unique_id_function=custom_generate_unique_id,\n)\n\n# Set all CORS enabled origins\nif settings.BACKEND_CORS_ORIGINS:\n    app.add_middleware(\n        CORSMiddleware,\n        allow_origins=[\"*\"],\n        allow_credentials=True,\n        allow_methods=[\"*\"],\n        allow_headers=[\"*\"],\n    )\n\napp.include_router(api_router, prefix=settings.API_V1_STR)\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/main.py b/main.py
--- a/main.py	(revision 75d527bfb93a2b53c134d84f551a120028e0a534)
+++ b/main.py	(date 1716977631425)
@@ -1,11 +1,15 @@
 import sentry_sdk
-from fastapi import FastAPI
+from fastapi import FastAPI, Request, status
+from fastapi.responses import JSONResponse
 from fastapi.routing import APIRoute
+from fastapi.exceptions import RequestValidationError
 from starlette.middleware.cors import CORSMiddleware

 from app.api.main import api_router
 from app.core.config import settings

+from typing import List, Dict
+

 def custom_generate_unique_id(route: APIRoute) -> str:
     return f"{route.tags[0]}-{route.name}"
@@ -20,6 +24,23 @@
     generate_unique_id_function=custom_generate_unique_id,
 )

+
+@app.exception_handler(RequestValidationError)
+async def validation_exception_handler(request: Request, exc: RequestValidationError):
+    errors: List[Dict[str, str]] = [
+        {
+            "loc": " -> ".join(str(loc) for loc in err["loc"]),
+            "msg": err["msg"],
+            "type": err["type"],
+        }
+        for err in exc.errors()
+    ]
+    return JSONResponse(
+        status_code=status.HTTP_400_BAD_REQUEST,
+        content={"detail": errors},
+    )
+
+
 # Set all CORS enabled origins
 if settings.BACKEND_CORS_ORIGINS:
     app.add_middleware(
Index: .pre-commit-config.yaml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># See https://pre-commit.com for more information\n# See https://pre-commit.com/hooks.html for more hooks\nrepos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.4.0\n    hooks:\n      - id: check-added-large-files\n      - id: check-toml\n      - id: check-yaml\n        args:\n          - --unsafe\n      - id: end-of-file-fixer\n        exclude: ^frontend/src/client/.*\n      - id: trailing-whitespace\n        exclude: ^frontend/src/client/.*\n  - repo: https://github.com/charliermarsh/ruff-pre-commit\n    rev: v0.2.2\n    hooks:\n      - id: ruff\n        args:\n          - --fix\n      - id: ruff-format\n\nci:\n  autofix_commit_msg: \uD83C\uDFA8 [pre-commit.ci] Auto format from pre-commit.com hooks\n  autoupdate_commit_msg: â¬† [pre-commit.ci] pre-commit autoupdate\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml
--- a/.pre-commit-config.yaml	(revision 75d527bfb93a2b53c134d84f551a120028e0a534)
+++ b/.pre-commit-config.yaml	(date 1716978171965)
@@ -20,6 +20,21 @@
         args:
           - --fix
       - id: ruff-format
+  - repo: https://github.com/psf/black
+    rev: 24.4.2
+    hooks:
+      - id: black
+        args: [ "--line-length=79", "--target-version=py311" ]
+  - repo: https://github.com/PyCQA/isort
+    rev: 5.13.2
+    hooks:
+      - id: isort
+        args:
+          - --profile=black
+          - --line-length=79
+          - --combine-as
+          - --combine-star
+          - --remove-redundant-aliases

 ci:
   autofix_commit_msg: ðŸŽ¨ [pre-commit.ci] Auto format from pre-commit.com hooks
Index: app/api/main.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from fastapi import APIRouter\n\nfrom app.api.routes import (\n    login,\n    scraped_data,\n    users,\n    utils,\n)\n\nfrom app.api.internal import scraper\n\napi_router = APIRouter()\napi_router.include_router(login.router, tags=[\"login\"])\napi_router.include_router(users.router, prefix=\"/users\", tags=[\"users\"])\napi_router.include_router(utils.router, prefix=\"/utils\", tags=[\"utils\"])\napi_router.include_router(\n    scraped_data.router, prefix=\"/scraped-data\", tags=[\"scraped_data\"]\n)\n\napi_router.include_router(\n    scraper.router, prefix=\"/internal\", tags=[\"internal-apis\"]\n)\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/api/main.py b/app/api/main.py
--- a/app/api/main.py	(revision 75d527bfb93a2b53c134d84f551a120028e0a534)
+++ b/app/api/main.py	(date 1716969171991)
@@ -1,11 +1,9 @@
 from fastapi import APIRouter

-from app.api.routes import (
-    login,
-    scraped_data,
-    users,
-    utils,
-)
+from app.api.routes.login import login
+from app.api.routes.users import users
+from app.api.routes.scraped_data import scraped_data
+from app.api.routes.utils import utils

 from app.api.internal import scraper

Index: requirements.txt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>alembic==1.13.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\nannotated-types==0.6.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\nanyio==4.3.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\nbcrypt==4.0.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\ncachetools==5.3.3 ; python_version >= \"3.10\" and python_version < \"4.0\"\ncertifi==2024.2.2 ; python_version >= \"3.10\" and python_version < \"4.0\"\nchardet==5.2.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\ncharset-normalizer==3.3.2 ; python_version >= \"3.10\" and python_version < \"4.0\"\nclick==8.1.7 ; python_version >= \"3.10\" and python_version < \"4.0\"\ncolorama==0.4.6 ; python_version >= \"3.10\" and python_version < \"4.0\" and (sys_platform == \"win32\" or platform_system == \"Windows\")\ncssselect==1.2.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\ncssutils==2.9.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\ndnspython==2.6.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\nemail-validator==2.1.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\nemails==0.6 ; python_version >= \"3.10\" and python_version < \"4.0\"\nexceptiongroup==1.2.0 ; python_version >= \"3.10\" and python_version < \"3.11\"\nfastapi==0.109.2 ; python_version >= \"3.10\" and python_version < \"4.0\"\ngreenlet==3.0.3 ; python_version >= \"3.10\" and python_version < \"4.0\" and (platform_machine == \"aarch64\" or platform_machine == \"ppc64le\" or platform_machine == \"x86_64\" or platform_machine == \"amd64\" or platform_machine == \"AMD64\" or platform_machine == \"win32\" or platform_machine == \"WIN32\")\ngunicorn==22.0.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\nh11==0.14.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\nhttpcore==1.0.4 ; python_version >= \"3.10\" and python_version < \"4.0\"\nhttptools==0.6.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\nhttpx==0.25.2 ; python_version >= \"3.10\" and python_version < \"4.0\"\nidna==3.7 ; python_version >= \"3.10\" and python_version < \"4.0\"\njinja2==3.1.4 ; python_version >= \"3.10\" and python_version < \"4.0\"\nlxml==5.1.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\nmako==1.3.2 ; python_version >= \"3.10\" and python_version < \"4.0\"\nmarkupsafe==2.1.5 ; python_version >= \"3.10\" and python_version < \"4.0\"\npackaging==24.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\npasslib[bcrypt]==1.7.4 ; python_version >= \"3.10\" and python_version < \"4.0\"\npremailer==3.10.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\npsycopg-binary==3.1.18 ; implementation_name != \"pypy\" and python_version >= \"3.10\" and python_version < \"4.0\"\npsycopg[binary]==3.1.18 ; python_version >= \"3.10\" and python_version < \"4.0\"\npydantic-core==2.16.3 ; python_version >= \"3.10\" and python_version < \"4.0\"\npydantic-settings==2.2.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\npydantic==2.6.4 ; python_version >= \"3.10\" and python_version < \"4.0\"\npyjwt==2.8.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\npython-dateutil==2.9.0.post0 ; python_version >= \"3.10\" and python_version < \"4.0\"\npython-dotenv==1.0.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\npython-multipart==0.0.7 ; python_version >= \"3.10\" and python_version < \"4.0\"\npyyaml==6.0.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\nrequests==2.31.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\nsentry-sdk[fastapi]==1.41.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\nsix==1.16.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\nsniffio==1.3.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\nsqlalchemy==2.0.28 ; python_version >= \"3.10\" and python_version < \"4.0\"\nsqlmodel==0.0.16 ; python_version >= \"3.10\" and python_version < \"4.0\"\nstarlette==0.36.3 ; python_version >= \"3.10\" and python_version < \"4.0\"\ntenacity==8.2.3 ; python_version >= \"3.10\" and python_version < \"4.0\"\ntyping-extensions==4.10.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\ntzdata==2024.1 ; python_version >= \"3.10\" and python_version < \"4.0\" and sys_platform == \"win32\"\nurllib3==2.2.1 ; python_version >= \"3.10\" and python_version < \"4.0\"\nuvicorn[standard]==0.24.0.post1 ; python_version >= \"3.10\" and python_version < \"4.0\"\nuvloop==0.19.0 ; (sys_platform != \"win32\" and sys_platform != \"cygwin\") and platform_python_implementation != \"PyPy\" and python_version >= \"3.10\" and python_version < \"4.0\"\nwatchfiles==0.21.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\nwebsockets==12.0 ; python_version >= \"3.10\" and python_version < \"4.0\"\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/requirements.txt b/requirements.txt
--- a/requirements.txt	(revision 75d527bfb93a2b53c134d84f551a120028e0a534)
+++ b/requirements.txt	(date 1716978369920)
@@ -1,56 +1,58 @@
-alembic==1.13.1 ; python_version >= "3.10" and python_version < "4.0"
-annotated-types==0.6.0 ; python_version >= "3.10" and python_version < "4.0"
-anyio==4.3.0 ; python_version >= "3.10" and python_version < "4.0"
-bcrypt==4.0.1 ; python_version >= "3.10" and python_version < "4.0"
-cachetools==5.3.3 ; python_version >= "3.10" and python_version < "4.0"
-certifi==2024.2.2 ; python_version >= "3.10" and python_version < "4.0"
-chardet==5.2.0 ; python_version >= "3.10" and python_version < "4.0"
-charset-normalizer==3.3.2 ; python_version >= "3.10" and python_version < "4.0"
-click==8.1.7 ; python_version >= "3.10" and python_version < "4.0"
-colorama==0.4.6 ; python_version >= "3.10" and python_version < "4.0" and (sys_platform == "win32" or platform_system == "Windows")
-cssselect==1.2.0 ; python_version >= "3.10" and python_version < "4.0"
-cssutils==2.9.0 ; python_version >= "3.10" and python_version < "4.0"
-dnspython==2.6.1 ; python_version >= "3.10" and python_version < "4.0"
-email-validator==2.1.1 ; python_version >= "3.10" and python_version < "4.0"
-emails==0.6 ; python_version >= "3.10" and python_version < "4.0"
-exceptiongroup==1.2.0 ; python_version >= "3.10" and python_version < "3.11"
-fastapi==0.109.2 ; python_version >= "3.10" and python_version < "4.0"
-greenlet==3.0.3 ; python_version >= "3.10" and python_version < "4.0" and (platform_machine == "aarch64" or platform_machine == "ppc64le" or platform_machine == "x86_64" or platform_machine == "amd64" or platform_machine == "AMD64" or platform_machine == "win32" or platform_machine == "WIN32")
-gunicorn==22.0.0 ; python_version >= "3.10" and python_version < "4.0"
-h11==0.14.0 ; python_version >= "3.10" and python_version < "4.0"
-httpcore==1.0.4 ; python_version >= "3.10" and python_version < "4.0"
-httptools==0.6.1 ; python_version >= "3.10" and python_version < "4.0"
-httpx==0.25.2 ; python_version >= "3.10" and python_version < "4.0"
-idna==3.7 ; python_version >= "3.10" and python_version < "4.0"
-jinja2==3.1.4 ; python_version >= "3.10" and python_version < "4.0"
-lxml==5.1.0 ; python_version >= "3.10" and python_version < "4.0"
-mako==1.3.2 ; python_version >= "3.10" and python_version < "4.0"
-markupsafe==2.1.5 ; python_version >= "3.10" and python_version < "4.0"
-packaging==24.0 ; python_version >= "3.10" and python_version < "4.0"
-passlib[bcrypt]==1.7.4 ; python_version >= "3.10" and python_version < "4.0"
-premailer==3.10.0 ; python_version >= "3.10" and python_version < "4.0"
-psycopg-binary==3.1.18 ; implementation_name != "pypy" and python_version >= "3.10" and python_version < "4.0"
-psycopg[binary]==3.1.18 ; python_version >= "3.10" and python_version < "4.0"
-pydantic-core==2.16.3 ; python_version >= "3.10" and python_version < "4.0"
-pydantic-settings==2.2.1 ; python_version >= "3.10" and python_version < "4.0"
-pydantic==2.6.4 ; python_version >= "3.10" and python_version < "4.0"
-pyjwt==2.8.0 ; python_version >= "3.10" and python_version < "4.0"
-python-dateutil==2.9.0.post0 ; python_version >= "3.10" and python_version < "4.0"
-python-dotenv==1.0.1 ; python_version >= "3.10" and python_version < "4.0"
-python-multipart==0.0.7 ; python_version >= "3.10" and python_version < "4.0"
-pyyaml==6.0.1 ; python_version >= "3.10" and python_version < "4.0"
-requests==2.31.0 ; python_version >= "3.10" and python_version < "4.0"
-sentry-sdk[fastapi]==1.41.0 ; python_version >= "3.10" and python_version < "4.0"
-six==1.16.0 ; python_version >= "3.10" and python_version < "4.0"
-sniffio==1.3.1 ; python_version >= "3.10" and python_version < "4.0"
-sqlalchemy==2.0.28 ; python_version >= "3.10" and python_version < "4.0"
-sqlmodel==0.0.16 ; python_version >= "3.10" and python_version < "4.0"
-starlette==0.36.3 ; python_version >= "3.10" and python_version < "4.0"
-tenacity==8.2.3 ; python_version >= "3.10" and python_version < "4.0"
-typing-extensions==4.10.0 ; python_version >= "3.10" and python_version < "4.0"
-tzdata==2024.1 ; python_version >= "3.10" and python_version < "4.0" and sys_platform == "win32"
-urllib3==2.2.1 ; python_version >= "3.10" and python_version < "4.0"
-uvicorn[standard]==0.24.0.post1 ; python_version >= "3.10" and python_version < "4.0"
-uvloop==0.19.0 ; (sys_platform != "win32" and sys_platform != "cygwin") and platform_python_implementation != "PyPy" and python_version >= "3.10" and python_version < "4.0"
-watchfiles==0.21.0 ; python_version >= "3.10" and python_version < "4.0"
-websockets==12.0 ; python_version >= "3.10" and python_version < "4.0"
+alembic==1.13.1
+annotated-types==0.6.0
+anyio==4.3.0
+bcrypt==4.0.1
+cachetools==5.3.3
+certifi==2024.2.2
+chardet==5.2.0
+charset-normalizer==3.3.2
+click==8.1.7
+colorama==0.4.6
+cssselect==1.2.0
+cssutils==2.9.0
+dnspython==2.6.1
+email-validator==2.1.1
+emails==0.6
+exceptiongroup==1.2.0
+fastapi==0.109.2
+greenlet==3.0.3
+gunicorn==22.0.0
+h11==0.14.0
+httpcore==1.0.4
+httptools==0.6.1
+httpx==0.25.2
+idna==3.7
+jinja2==3.1.4
+lxml==5.1.0
+mako==1.3.2
+markupsafe==2.1.5
+packaging==24.0
+passlib[bcrypt]==1.7.4
+premailer==3.10.0
+psycopg-binary==3.1.18
+psycopg[binary]==3.1.18
+pydantic-core==2.16.3
+pydantic-settings==2.2.1
+pydantic==2.6.4
+pyjwt==2.8.0
+python-dateutil==2.9.0.post0
+python-dotenv==1.0.1
+python-multipart==0.0.7
+pyyaml==6.0.1
+requests==2.31.0
+sentry-sdk[fastapi]==1.41.0
+six==1.16.0
+sniffio==1.3.1
+sqlalchemy==2.0.28
+sqlmodel==0.0.16
+starlette==0.36.3
+tenacity==8.2.3
+typing-extensions==4.10.0
+tzdata==2024.1
+urllib3==2.2.1
+uvicorn[standard]==0.24.0.post1
+uvloop==0.19.0
+watchfiles==0.21.0
+websockets==12.0
+black==24.4.2
+isort==5.13.2
diff --git a/app/api/routes/utils.py b/app/api/routes/utils/utils.py
rename from app/api/routes/utils.py
rename to app/api/routes/utils/utils.py
diff --git a/app/api/routes/scraped_data.py b/app/api/routes/scraped_data/scraped_data.py
rename from app/api/routes/scraped_data.py
rename to app/api/routes/scraped_data/scraped_data.py
diff --git a/app/api/routes/users.py b/app/api/routes/users/users.py
rename from app/api/routes/users.py
rename to app/api/routes/users/users.py
diff --git a/app/api/routes/login.py b/app/api/routes/login/login.py
rename from app/api/routes/login.py
rename to app/api/routes/login/login.py
